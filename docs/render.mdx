---
title: Deploy on Render
---

在 Render 上部署 Clawdbot，使用基础设施即代码（Infrastructure as Code）。包含的 `render.yaml` 蓝图以声明方式定义了你的整个堆栈，包括服务、磁盘、环境变量，你可以通过单击一次即可部署，并将基础设施与你的代码一起进行版本控制。

## 先决条件

- 一个 [Render 账户](https://render.com)（提供免费层级）
- 从你偏好的 [模型提供者](/providers) 获取一个 API 密钥

## 使用 Render 蓝图进行部署

<a href="https://render.com/deploy?repo=https://github.com/clawdbot/clawdbot" target="_blank" rel="noreferrer">部署到 Render</a>

点击此链接将执行以下操作：

1. 从该仓库根目录的 `render.yaml` 蓝图创建一个新的 Render 服务。
2. 提示你设置 `SETUP_PASSWORD`。
3. 构建 Docker 镜像并进行部署。

部署完成后，你的服务网址将遵循 `https://<service-name>.onrender.com` 的格式。

## 理解蓝图

Render 蓝图是定义你基础设施的 YAML 文件。本仓库中的 `render.yaml` 配置了运行 Clawdbot 所需的一切：```yaml
services:
  - type: web
    name: clawdbot
    runtime: docker
    plan: starter
    healthCheckPath: /health
    envVars:
      - key: PORT
        value: "8080"
      - key: SETUP_PASSWORD
        sync: false          # prompts during deploy
      - key: CLAWDBOT_STATE_DIR
        value: /data/.clawdbot
      - key: CLAWDBOT_WORKSPACE_DIR
        value: /data/workspace
      - key: CLAWDBOT_GATEWAY_TOKEN
        generateValue: true  # auto-generates a secure token
    disk:
      name: clawdbot-data
      mountPath: /data
      sizeGB: 1
```
使用的关键蓝图功能：

| 功能 | 用途 |
|---------|---------|
| `runtime: docker` | 从仓库的 Dockerfile 构建 |
| `healthCheckPath` | 监控 `/health` 路径并重启不健康实例 |
| `sync: false` | 部署时提示输入值（用于密钥） |
| `generateValue: true` | 自动生成加密安全的值 |
| `disk` | 持久化存储，可抵御重新部署 |

## 选择一个计划

| 计划 | 空闲时关闭 | 存储 | 适合 |
|------|-----------|------|----------|
| 免费版 | 空闲 15 分钟后 | 不可用 | 测试、演示 |
| 入门版 | 永不关闭 | 1GB+ | 个人使用、小型团队 |
| 标准版+ | 永不关闭 | 1GB+ | 生产环境、多渠道使用 |

蓝图默认使用 `starter`。如需使用免费版，请在你 fork 的 `render.yaml` 中将 `plan: free`（但请注意：没有持久化存储，每次部署后配置都会重置）。

## 部署后

### 完成设置向导

1. 导航到 `https://<your-service>.onrender.com/setup`
2. 输入你的 `SETUP_PASSWORD`
3. 选择一个模型提供者并粘贴你的 API 密钥
4. 可选地配置消息渠道（Telegram、Discord、Slack）
5. 点击 **运行设置**

### 访问控制界面

Web 控制台位于 `https://<your-service>.onrender.com/clawdbot`。

## Render 控制台功能

### 日志

在 **控制台 → 你的服务 → 日志** 中查看实时日志。可以按以下方式过滤：
- 构建日志（Docker 镜像创建）
- 部署日志（服务启动）
- 运行时日志（应用程序输出）

### Shell 访问

为了调试，可以通过 **控制台 → 你的服务 → Shell** 打开一个 shell 会话。持久化存储挂载在 `/data`。

### 环境变量

在 **控制台 → 你的服务 → 环境** 中修改变量。更改会触发自动重新部署。

### 自动部署

如果你使用的是原始 Clawdbot 仓库，Render 不会自动部署你的 Clawdbot。要更新它，请从控制台运行手动蓝图同步。

## 自定义域名

1. 进入 **控制台 → 你的服务 → 设置 → 自定义域名**
2. 添加你的域名
3. 按指示配置 DNS（CNAME 指向 `*.onrender.com`）
4. Render 会自动提供 TLS 证书

## 扩展

Render 支持横向和纵向扩展：

- **纵向扩展**：更改计划以获得更多 CPU/RAM
- **横向扩展**：增加实例数量（标准计划及以上）

对于 Clawdbot，纵向扩展通常已足够。横向扩展需要使用粘性会话或外部状态管理。```
https://<your-service>.onrender.com/setup/export
```
这将下载一个便携式备份，您可以在任何 Clawdbot 主机上恢复。

## 故障排除

### 服务无法启动

检查 Render 仪表板中的部署日志。常见问题包括：

- 缺少 `SETUP_PASSWORD` —— 虽然 Blueprint 会提示您输入此值，但请确认它已正确设置
- 端口不匹配 —— 确保 `PORT=8080` 与 Dockerfile 中暴露的端口一致

### 冷启动缓慢（免费计划）

免费计划的服务在 15 分钟无活动后会停止运行。在服务停止后，第一个请求可能需要几秒钟来启动容器。升级到 Starter 计划可实现始终在线。

### 重新部署后数据丢失

这在免费计划中会发生（没有持久化磁盘）。请升级到付费计划，或定期通过 `/setup/export` 导出您的配置。